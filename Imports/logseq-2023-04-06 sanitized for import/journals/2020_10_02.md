- [[Expedia Experimentation - AEP engagement]] meeting with Expedia

- DONE EY Performance guidelines #[[Projects]]-QS-Core #Projects

- DONE File Frederik PLATIR 

- DONE Closed JIRA issues - add to excel #[[Projects]]-QS-misc #Projects
	 - 1. Scheduling of Batch Queries (time-based and trigger-based)

	 - 2. Collect execution statistics for performance improvements

	 - 3. Parametrized Queries User Experience (date functions as parameters, parameters anywhere)

	 - 4. Exporting Query Results as CSV & JSON to Cloud Storage Destinations

	 - 5. Data View UX — manage views, datasets consistently across dataset panel and SQL Editor

- [[Comprehensive Technical Tutorial for Adobe Experience Platform]]
	 - Setup
		 - Git repo: https://git.corp.adobe.com/vangeluw/lumapm

		 - Demo profile password: 1234

		 - Active Configuration ID: YvA5jLFVkC

		 - Your newly created Configuration ID: YvA5jLFVkC
			 - API public key: 336cb3a64605c80e7c1a6d16e15c32f4db9ba15c

		 - Image
			 - ![](https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fnikhil-maddirala%2FrkFVAhohCk.png?alt=media&token=eedecfc4-8921-4644-83a2-502725fc7d24)

	 - Feedback / suggestions
		 - AEP Demo - Website Interactions: Dataset limitations
			 - Dataset is very small; Only 1 day of data; Very few products

		 - Query Service
			 - Parameterized queries

- Hilton data prep logic review with [[Nick Hecht]], [[Sri Y]], [[Trevor Paulsen]]
	 - Use case: MTA - multi-touch attribution

- Akin feedback:
	 - "Data Prep Latency: Preparing data for analytics is slow and tedious"
		 - Speed is not an area where Query Service currently shines, so I would get rid of this.

		 - Replace with something like: "Need to export data to data lake and connect it with other compute and BI tools for analysis; this is very complex." 

		 - Then in the "what makes it different section" I would highlight how you can use AEP to query data and connect to BI tools without needing to export your data anywhere.

	 - "Inadequate transparency and governance embedded in insights workflows: Vast amounts of customer data is left unused for customer intelligence due to lack of governance and transparency on what aspects of data can be safely used for insights. "
		 - Instead, try somethign like: "Inadequate transparency and governance embedded in insights workflows: respecting customers' privacy as well as legal and organizational regulations is a complex challenge. AEP's privacy and data governance framework makes it easy."

	 - "visualizations and reports through Microsoft PowerBI or other BI tools"
		 - I suggest adding Tableau: "Microsoft PowerBI, Tableau, and other..."

	 - "•	Propagate usage labels, data usage policies, and privacy policies to all of your query generated datasets to ensure trust, privacy, and governance. "
		 - This is NOT available now. Please move to coming soon.

	 - "Available now"
		 - Add: " Purpose-built functions to support marketing use cases using windowing, sessionization, attribution and pathing functions."

- DONE Update CJA meetings agenda #[[Projects]]-QS-CJA #Projects [[October 6th, 2020]]
	 - Anurag / GTM - next meeting

	 - Summit planing - following meeting

- [[query-service-demo]] script
	 - Introduction: Luma on AEP
		 - Website > Config > LDAP > Brand

		 - On the Luma Telecom website, you can browse different phones, add to cart, purchase, and so on. There's also a page for "cancel service" which instructs you to call their call center.

		 - Later in this demo, we will use Query Service investigate which customers called the call center after clicking on this page, and how many of them went on to cancel their service.

	 - AEP Query Editor UI
		 - Overview page

		 - Create query, execute (e.g. "show tables;") and see result

		 - Log view: see all past query runs

	 - PSQL 
		 - AEP Queries > Credentials > PSQL command > Copy

		 - Terminal > Paste

		 - Execute query and see results

		 - Note: the rest of the demo will focus on the Query Editor UI, but we could also use PSQL for everything.

	 - Basic Queries
		 - How many product views do we have on a daily basis?
			 - 
```javascript
select date_format( timestamp , 'yyyy-MM-dd') AS Day,
       count(*) AS productViews
from   aep_demo_website_interactions
where  _acpstardust.brand.brandName like 'Luma Telco'
and    _acpstardust.productData.productInteraction = 'productView'
group by Day
limit 10;
```

		 - Top 5 products viewed
			 - 
```javascript
select _acpstardust.productData.productName, count(*)
from   aep_demo_website_interactions
where  _acpstardust.brand.brandName like 'Luma Telco'
and    _acpstardust.productData.productInteraction = 'productView'
group  by _acpstardust.productData.productName
order  by 2 desc
limit 5;
```

		 - Identify visitors with risk to Churn 
			 - Customers who visited the page "Cancel Service"

			 - 
```javascript
select distinct _acpstardust.identification.ecid
from   aep_demo_website_interactions
where  _acpstardust.brand.brandName like 'Luma Telco'
and    web.webPageDetails.name = 'Cancel Service'
group  by _acpstardust.identification.ecid
limit 10;
```

	 - Advanced Queries
		 - ADFs
			 - Adobe provides functions to process raw hit-level data into visit-level and visitor-level data.

		 - What do people do on the site before reaching the "Cancel Service" page as the 3rd page in a session?
			 - SESS_TIMEOUT() processes raw hits into "visits" based on a configurable time window. 

			 - NEXT() and PREVIOUS() help you to understand how customers navigate your site.

			 - 
```javascript
SELECT
  webPage,
  webPage_2,
  webPage_3,
  webPage_4,
  count(*) journeys
FROM
  (
      SELECT
        webPage,
        NEXT(webPage, 1, true)
          OVER(PARTITION BY ecid, session.num
                ORDER BY timestamp
                ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING).value
          AS webPage_2,
        NEXT(webPage, 2, true)
          OVER(PARTITION BY ecid, session.num
                ORDER BY timestamp
                ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING).value
          AS webPage_3,
        NEXT(webPage, 3, true)
           OVER(PARTITION BY ecid, session.num
                ORDER BY timestamp
                ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING).value
          AS webPage_4,
        session.depth AS SessionPageDepth
      FROM (
            select a._acpstardust.identification.ecid as ecid,
                   a.timestamp,
                   web.webPageDetails.name as webPage,
                    SESS_TIMEOUT(timestamp, 60 * 30) 
                       OVER (PARTITION BY a._acpstardust.identification.ecid 
                             ORDER BY timestamp 
                             ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) 
                  AS session
            from   aep_demo_website_interactions a
            where  a._acpstardust.identification.ecid in ( 
                select b._acpstardust.identification.ecid
                from   aep_demo_website_interactions b
                where  b._acpstardust.brand.brandName like 'Luma Telco'
                and    b.web.webPageDetails.name = 'Cancel Service'
            )
        )
)
WHERE SessionPageDepth=1
and   webpage_3 = 'Cancel Service'
GROUP BY webPage, webPage_2, webPage_3, webPage_4
ORDER BY journeys DESC
LIMIT 10;
```

		 - How much time do we have before a visitor calls the call center after visiting the "Cancel Service" Page?
			 - To answer this kind of query will we use the **TIME_BETWEEN_NEXT_MATCH() **Adobe Defined Function.

			 - 
```javascript
select * from (
       select _acpstardust.identification.ecid as ecid,
              web.webPageDetails.name as webPage,
              TIME_BETWEEN_NEXT_MATCH(timestamp, web.webPageDetails.name='Call Start', 'seconds')
              OVER(PARTITION BY _acpstardust.identification.ecid
                  ORDER BY timestamp
                  ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)
              AS contact_callcenter_after_seconds
       from   aep_demo_website_interactions
       where  _acpstardust.brand.brandName like 'Luma Telco'
       and    web.webPageDetails.name in ('Cancel Service', 'Call Start')
) r
where r.webPage = 'Cancel Service'
limit 15;
```

	 - Templatize queries and create tables via UI or API 
		 - Call Center Interaction Analysis
			 - Broad look at customer call center interactions

			 - 
```javascript
select e._acpstardust.identification.ecid as ecid,
       e.placeContext.geo.city as city,
       e.placeContext.geo._schema.latitude latitude,
       e.placeContext.geo._schema.longitude longitude,
       e.placeContext.geo.countryCode as countrycode,
       c._acpstardust.callDetails.callFeeling as callFeeling,
       c._acpstardust.callDetails.callTopic as callTopic,
       c._acpstardust.callDetails.contractCancelled as contractCancelled,
       l._acpstardust.loyalty.loyaltyStatus as loyaltystatus,
       l._acpstardust.loyalty.loyaltyPoints as loyaltypoints,
       l._acpstardust.identification.crmid as crmid
from   aep_demo_website_interactions e
      ,aep_demo_call_center_interactions c
      ,aep_demo_loyalty_data l
where  e._acpstardust.brand.brandName like 'Luma Telco'
and    e.web.webPageDetails.name in ('Cancel Service', 'Call Start')
and    e._acpstardust.identification.ecid = c._acpstardust.identification.ecid
and    l._acpstardust.identification.ecid = e._acpstardust.identification.ecid;

```

		 - Save query and select output dataset.
			 - As a result, you will see a new query with a status **Submitted **.

			 - Upon completion, you will see a new entry for **Dataset Created ** (may take 5 - 10 minutes).

	 - Tableau integration
		 - Connect
			 - In **Connect To a Server **select **PostgreSQL **:

			 - Go to Adobe Experience Platform, to **Queries **and to **Credentials **.

			 - From the **Credentials **page in Adobe Experience Platform, copy the **Host **and paste it in the **Server **field, copy the **Database **and paste it in the **Database **field in Tableau, copy the **Port **and paste it in the field **Port **in Tableau, do the same for **Username **and **Password **. Next, click **Sign In **.

			 - Takes 5-10 seconds.

		 - Click search (1) and enter your **ldap **into the search field, identify you table from the result set and drag (3) it onto the location named **Drag tables here **. When finished, click on **Sheet 1 **(3).

		 - To visualize our data on the map we need to convert longitude and latitude to dimensions. In **Measures **select **Latitude **(1) and open the field's dropdown and select **Convert to Dimension **(2). Do the same for the **Longitude **measure.

		 - Drag the **Longitude **measure to the **Columns **and the **Latitude **measure to **Rows **. Automatically the map of **Belgium **will appear with little dots representing the cities in out data set.

		 - Select **Measure Names **(1), open the dropdown and select **Add to Sheet **(2):

		 - You will now have a map, with dots of various sizes. The size indicates the number of call center interactions for that specific city. To vary the size of the dots, navigate to the right panel and open **Measure Values **(using the drop down icon). From the drop down list select **Edit Sizes **. Play around with different sizes.

		 - To further display the data per **Call Topic **, drag (1) the **Call Topic **dimension onto **Pages **. Navigate through the different **Call topics **using the **Call Topic **(2) on the right side of the screen:

	 - Tableau - advanced
		 - Sneak peek into an advanced tableau dashboard we built

- Roadmap jira review with [[Meera Srinivasan]], [[Saurabh Mahapatra]]
	 - DONE UI/UX: Q1 scope for the epic; rename "Customer high priority bugs and enhancements for Q1"; rename enhancements to "customer issues and bugs".; change platq to PLAT.
		 - DONE Link tickets

	 - DONE Trust: DULE enforcement, Q2

	 - DONE Performance, Q1

	 - DONE SQL Prep:  Only SQL Orchestration for Q1 (write FOR CJM / Sierra Reporting) and make another epic for enterprise sync (call it integration with Destination service) - make the other one Q2

	 - Label for Q1

- 
