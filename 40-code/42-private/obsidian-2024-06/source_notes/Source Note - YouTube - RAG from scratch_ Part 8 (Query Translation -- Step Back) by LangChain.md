---
source-title: RAG from scratch: Part 8 (Query Translation -- Step Back)
source-url: https://youtube.com/watch?v=xn1jEjRyJ2U

source-mediatype: video
source-platform: YouTube

source-youtube-video-id: xn1jEjRyJ2U
source-youtube-channel-id: UCC-lyoTfSrcJzA1ab3APAgw
source-youtube-channel-name: LangChain
---

## Summary (AI)
**TLDR:**
The video discusses different approaches in queer translation for improving retrieval, including rewriting questions, breaking down questions into sub-questions, and stepback prompting. Stepback prompting involves asking more abstract questions to improve retrieval efficiency. The process includes formulating prompts using examples and generating stepback questions, then combining retrieved information to produce a final answer.

**Key Points:**
- Queer translation aims to improve retrieval efficiency by translating or modifying input questions.
- Two main approaches include rewriting questions (such as rag fusion multiquery) and breaking down questions into sub-questions (like least to most prompting).
- Stepback prompting, a different approach, involves asking more abstract questions to enhance retrieval.
- The process includes formulating prompts using examples provided, generating stepback questions, and combining retrieved information for a final answer.
- Stepback prompting could be useful in domains with conceptual knowledge to automatically formulate higher-level questions and improve retrieval efficiency.

## Video description
Error retrieving description for video xn1jEjRyJ2U

## Video transcript
hi this is lanch from Lang chain this is the fourth video uh in our Deep dive on queer translation in the rag from scratch series and we're going to be focused on step back prompting so query translation as we said in some of the prior videos kind of sits at the the kind of first stage of kind of a a a rag pipeline or flow and the main aim is to take an input question and to translate it or modify in such a way that it improves retrieval now we talked through a few different ways to approach this problem so one General approach involves rewriting a question and we talk about two ways to do that rag fusion multiquery and again this is this is really about taking a question and modifying it to capture a few different perspectives um which may improve the refal process now another approach is to take a question and kind of make it less abstract like break it down into sub questions um and then solve each of those independently so that's what we saw with like least to most prompting um and a bunch of other variants kind of in that in that vein of sub problem solving and then consolidating those Solutions into a final answer now a different approach presented um by again Google as well is stepback prompting so stepback prompting kind of takes the the the opposite approach where it tries to ask a more abstract question so the paper talks a lot about um using F shot prompting to produce what they call the stepback or more abstract questions and the way it does it is it provides a number of examples of stepback questions given your original question so like this is like this is for example their like per prompt template you're an expert World Knowledge I asked you a question your response should be comprehensive not contradict with the following um and this is kind of where you provide your like original and then step back so here's like some example um questions so like um like uh at year saw the creation of the region where the country is located which region of the country um is the county of of her related um Janell is born in what country what is janell's personal history so that that's maybe a more intutive example so it's like you ask a very specific question about like the country someone's born the more abstract question is like just give me the general history of this individual without worrying about that particular um more specific question um so let's actually just walk through how this can be done in practice um so again here's kind of like a a diagram of of uh the various approaches um from less abstraction to more abstraction now here is where we're formulating our prompt using a few of the few shot examples from the paper um so again like input um yeah something about like the police performing lawful arrests and what what camp members of the police do so like it it basically gives the model a few examples um we basically formulate this into a prompt that's really all that's going on here again we we repeat um this overall prompt which we saw from the paper your expert World Knowledge your test is to step back and paraphrase a question generate more a generic stepback question which is easier to answer here's some examples so it's like a very intuitive prompt so okay let's start with the question what is Task composition for llm agents and we're going to say generate stack question okay so this is pretty intuitive right what is the process of task compositions so like not worrying as much about agents but what is that process of task composition in general and then hopefully that can be independently um retrieved we we can independently retrieve documents related to the stepb question and in addition retrieve documents related to the the actual question and combine those to produce kind of final answer so that's really all that's going on um and here's the response template where we're Plumbing in the stepb back context and our question context and so what we're going to do here is we're going to take our input question and perform retrieval on that we're also going to generate our stepback question and perform retrieval on that we're going to plumb those into the prompt as here's our ver here's our basically uh our prompt Keys normal question step back question um and our overall question again we formulate those as a dict we Plum those into our response prompt um and then we go ahead and attempt to answer our overall question so we're going to run that that's running and okay we have our answer now I want to hop over to Langs Smith and attempt to show you um kind of what that looked like under the hood so let's see let's like go into each of these steps so here was our prompt right you're an expert World Knowledge your test to to step back and paraph a question um so um here were our few shot prompts and this was our this was our uh step back question so what is the process of task composition um good from the input what is Tas composition for LM agents we perform retrieval on both what is process tax composition uh and what is LM agents we perform both retrievals we then populate our prompt with both uh original question answer and then here's the context retrieve from both the question and the stepb back question here was our final answer so again this is kind of a nice technique um probably depends on a lot of the types of like the type of domain you want to perform retrieval on um but in some domains where for example there's a lot of kind of conceptual knowledge that underpins questions you expect users to ask this stepback approach could be really convenient to automatically formulate a higher level question um to for example try to improve retrieval I can imagine if you're working with like kind of textbooks or like technical documentation where you make independent chapters focused on more highlevel kind of like Concepts and then other chapters on like more detailed uh like implementations this kind of like stepback approach and independent retrieval could be really helpful thanks
